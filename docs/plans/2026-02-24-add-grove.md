# Add Grove to nix-config Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Add Grove (TUI workspace manager for AI coding agents) as a flake input and install it on endeavour, opportunity, and the Mac.

**Architecture:** Add Grove as a flake input, destructure it in outputs, and reference the package in `home.nix` cross-platform packages list â€” same pattern as `aws-tools` and `aws-use-sso`.

**Tech Stack:** Nix Flakes, Home Manager

---

### Task 1: Add Grove flake input

**Files:**
- Modify: `flake.nix:47-50` (inputs section, after `greenlight`)

**Step 1: Add the input**

Add after the `greenlight` input block (line 50):

```nix
grove = {
  url = "github:MichaelVessia/grove";
  inputs.nixpkgs.follows = "nixpkgs";
};
```

**Step 2: Add `grove` to the outputs destructure**

In `flake.nix:53-72`, add `grove,` to the destructured inputs set (after `greenlight,`):

```nix
outputs =
  inputs@{
    self,
    nixpkgs,
    nixpkgs-stable,
    nixpkgs-master,
    nixos-hardware,
    nix-darwin,
    home-manager,
    nvf,
    aws-tools,
    aws-use-sso,
    hubctl,
    llm-agents,
    niri,
    noctalia,
    sweet-nothings,
    nix-zed-extensions,
    greenlight,
    grove,
  }:
```

**Step 3: Commit**

```bash
git add flake.nix
git commit -m "feat(flake): add grove input"
```

### Task 2: Add Grove package to home.nix

**Files:**
- Modify: `users/jordangarrison/home.nix:187-189` (cross-platform packages list, near aws-tools)

**Step 1: Add grove to the cross-platform packages**

Add after line 189 (`inputs.aws-use-sso...`):

```nix
inputs.grove.packages.${pkgs.system}.default
```

**Step 2: Commit**

```bash
git add users/jordangarrison/home.nix
git commit -m "feat(home): add grove workspace manager"
```

### Task 3: Verify the build

**Step 1: Update flake.lock**

Run: `nix flake update grove --flake .`
Expected: flake.lock updated with grove entry

**Step 2: Build to verify**

Run: `nh os build .`
Expected: Build succeeds (grove package is fetched and built)

**Step 3: Commit lockfile**

```bash
git add flake.lock
git commit -m "chore(flake): add grove to flake.lock"
```
